{
  "info": {
    "name": "Healthcare Portal API - Complete Testing",
    "description": "Comprehensive API collection for Healthcare Portal with Doctor and Admin systems (updated with Doctor Workbench endpoints)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.1.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000/api/v1",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "adminAccessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "doctorId",
      "value": "",
      "type": "string"
    },
    {
      "key": "adminId",
      "value": "",
      "type": "string"
    },
    {
      "key": "testEmail",
      "value": "test.doctor@example.com",
      "type": "string"
    },
    {
      "key": "adminEmail",
      "value": "admin@example.com",
      "type": "string"
    },
    {
      "key": "workbenchDate",
      "value": "",
      "type": "string"
    },
    {
      "key": "mockAiUrl",
      "value": "http://localhost:3001",
      "type": "string"
    },
    {
      "key": "testAppointmentId",
      "value": "appt_123",
      "type": "string"
    },
    {
      "key": "testEncounterId",
      "value": "",
      "type": "string"
    },
    {
      "key": "testPatientId",
      "value": "patient_1",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "üè• Doctor Authentication",
      "item": [
        {
          "name": "Register Doctor - Test User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Registration successful', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.doctor) {",
                  "        pm.collectionVariables.set('doctorId', response.data.doctor._id);",
                  "        pm.collectionVariables.set('testEmail', response.data.doctor.email);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Test User\",\n  \"email\": \"{{testEmail}}\",\n  \"medicalRegistrationId\": \"MED{{$timestamp}}\",\n  \"specialty\": \"General Medicine\",\n  \"password\": \"SecurePass123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Register a test doctor for testing purposes"
          },
          "response": []
        },
        {
          "name": "Login Doctor - Test User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Login successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.accessToken) {",
                  "        pm.collectionVariables.set('accessToken', response.data.accessToken);",
                  "    }",
                  "    if (response.data && response.data.doctor) {",
                  "        pm.collectionVariables.set('doctorId', response.data.doctor._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"SecurePass123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": ["{{baseUrl}}"],
              "path": ["login"]
            },
            "description": "Login with test doctor credentials"
          },
          "response": []
        },
        {
          "name": "Get Doctor Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Profile retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains doctor data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('doctor');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/profile",
              "host": ["{{baseUrl}}"],
              "path": ["profile"]
            },
            "description": "Get current doctor's profile"
          },
          "response": []
        },
        {
          "name": "Update Doctor Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Profile updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Test User Updated\",\n  \"specialty\": \"Internal Medicine\",\n  \"phoneNumber\": \"+1234567890\",\n  \"address\": {\n    \"street\": \"123 Test St\",\n    \"city\": \"Test City\",\n    \"state\": \"TS\",\n    \"zipCode\": \"12345\"\n  },\n  \"experience\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/profile",
              "host": ["{{baseUrl}}"],
              "path": ["profile"]
            },
            "description": "Update doctor profile information"
          },
          "response": []
        },
        {
          "name": "Logout Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Logout successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/logout",
              "host": ["{{baseUrl}}"],
              "path": ["logout"]
            },
            "description": "Logout current doctor"
          },
          "response": []
        }
      ],
      "description": "Doctor authentication and profile management endpoints"
    },
    {
      "name": "üßë‚Äç‚öïÔ∏è Doctor Workbench",
      "item": [
        {
          "name": "Today's Appointments",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure workbenchDate has a value as YYYY-MM-DD; default to today (UTC)",
                  "let d = pm.collectionVariables.get('workbenchDate');",
                  "if (!d) {",
                  "  const now = new Date();",
                  "  const y = now.getUTCFullYear();",
                  "  const m = String(now.getUTCMonth() + 1).padStart(2, '0');",
                  "  const day = String(now.getUTCDate()).padStart(2, '0');",
                  "  d = `${y}-${m}-${day}`;",
                  "  pm.collectionVariables.set('workbenchDate', d);",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Appointments fetched', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test('Has status and data array', function () {",
                  "  pm.expect(json).to.have.property('status', 'success');",
                  "  pm.expect(json).to.have.property('data');",
                  "  pm.expect(Array.isArray(json.data)).to.eql(true);",
                  "});",
                  "if (json.data.length > 0) {",
                  "  pm.test('Appointment item shape', function () {",
                  "    const a = json.data[0];",
                  "    pm.expect(a).to.have.property('appointmentId');",
                  "    pm.expect(a).to.have.property('scheduledTime');",
                  "    pm.expect(a).to.have.property('patient');",
                  "    pm.expect(a.patient).to.have.property('id');",
                  "    pm.expect(a).to.have.property('appointmentType');",
                  "    pm.expect(a).to.have.property('status');",
                  "  });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/appointments?date={{workbenchDate}}",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"],
              "query": [
                {
                  "key": "date",
                  "value": "{{workbenchDate}}"
                }
              ]
            },
            "description": "Get today's (or specified date) appointments for the authenticated practitioner"
          },
          "response": []
        },
        {
          "name": "Action Items Summary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Workbench summary fetched', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test('Has expected counters', function () {",
                  "  pm.expect(json).to.have.property('status', 'success');",
                  "  pm.expect(json).to.have.property('data');",
                  "  pm.expect(json.data).to.have.property('newResultsToReview');",
                  "  pm.expect(json.data).to.have.property('pendingConsultationRequests');",
                  "  pm.expect(json.data).to.have.property('unreadPatientMessages');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/workbench/summary",
              "host": ["{{baseUrl}}"],
              "path": ["workbench", "summary"]
            },
            "description": "Get counts for new results, pending consultation requests, and unread messages"
          },
          "response": []
        },
        {
          "name": "Performance Snapshot",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure workbenchDate has a value as YYYY-MM-DD; default to today (UTC)",
                  "let d = pm.collectionVariables.get('workbenchDate');",
                  "if (!d) {",
                  "  const now = new Date();",
                  "  const y = now.getUTCFullYear();",
                  "  const m = String(now.getUTCMonth() + 1).padStart(2, '0');",
                  "  const day = String(now.getUTCDate()).padStart(2, '0');",
                  "  d = `${y}-${m}-${day}`;",
                  "  pm.collectionVariables.set('workbenchDate', d);",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Performance stats fetched', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test('Has expected metrics', function () {",
                  "  pm.expect(json).to.have.property('status', 'success');",
                  "  pm.expect(json).to.have.property('data');",
                  "  pm.expect(json.data).to.have.property('patientsSeen');",
                  "  pm.expect(json.data).to.have.property('patientsScheduled');",
                  "  pm.expect(json.data).to.have.property('averageConsultTimeMinutes');",
                  "  pm.expect(json.data).to.have.property('pendingDocumentationCount');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/practitioners/me/stats?date={{workbenchDate}}",
              "host": ["{{baseUrl}}"],
              "path": ["practitioners", "me", "stats"],
              "query": [
                {
                  "key": "date",
                  "value": "{{workbenchDate}}"
                }
              ]
            },
            "description": "Get performance snapshot metrics for the practitioner for a day"
          },
          "response": []
        }
      ],
      "description": "Doctor dashboard workbench endpoints"
    },
    {
      "name": "üè• Patient Encounters (Mock Data Layer)",
      "item": [
        {
          "name": "Check Mock AI Service Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Mock AI service is healthy', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Health response contains status', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('status', 'healthy');",
                  "    pm.expect(response).to.have.property('service');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{mockAiUrl}}/health",
              "host": ["{{mockAiUrl}}"],
              "path": ["health"]
            },
            "description": "Check if Mock AI service is running (required for encounter workflows)"
          },
          "response": []
        },
        {
          "name": "Get Encounter Service Info",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Service info retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains service configuration', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('service');",
                  "    pm.expect(response.data).to.have.property('aiServiceUrl');",
                  "    pm.expect(response.data).to.have.property('repositories');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/encounters/service-info",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "service-info"]
            },
            "description": "Get encounter service configuration and health information"
          },
          "response": []
        },
        {
          "name": "Get Patient Medical History",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Patient history retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains patient and history data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('patient');",
                  "    pm.expect(response.data).to.have.property('history');",
                  "    pm.expect(response.data).to.have.property('historyCount');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/encounters/patient/{{testPatientId}}/history",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "patient", "{{testPatientId}}", "history"]
            },
            "description": "Get medical history for test patient (John Doe - patient_1)"
          },
          "response": []
        },
        {
          "name": "Create Encounter Bundle with AI Analysis",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Encounter bundle created successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.bundle && response.data.bundle.encounter) {",
                  "        pm.collectionVariables.set('testEncounterId', response.data.bundle.encounter.id);",
                  "        console.log('Encounter ID saved:', response.data.bundle.encounter.id);",
                  "    }",
                  "}",
                  "",
                  "pm.test('Bundle contains required components', function () {",
                  "    const response = pm.response.json();",
                  "    const bundle = response.data.bundle;",
                  "    pm.expect(bundle).to.have.property('encounter');",
                  "    pm.expect(bundle).to.have.property('patient');",
                  "    pm.expect(bundle).to.have.property('medicalHistory');",
                  "    pm.expect(bundle).to.have.property('aiAnalysis');",
                  "    pm.expect(bundle).to.have.property('encounterForm');",
                  "});",
                  "",
                  "pm.test('AI analysis contains expected fields', function () {",
                  "    const response = pm.response.json();",
                  "    const aiAnalysis = response.data.bundle.aiAnalysis;",
                  "    pm.expect(aiAnalysis).to.have.property('summary');",
                  "    pm.expect(aiAnalysis).to.have.property('recommendations');",
                  "    pm.expect(aiAnalysis).to.have.property('confidence');",
                  "    pm.expect(aiAnalysis).to.have.property('processingTimeMs');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/encounters/{{testAppointmentId}}/bundle",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "{{testAppointmentId}}", "bundle"]
            },
            "description": "Create encounter bundle with patient data, history, and AI analysis for appointment appt_123 (John Doe)"
          },
          "response": []
        },
        {
          "name": "Finalize Encounter with Form Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Encounter finalized successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains finalization details', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('encounter');",
                  "    pm.expect(response.data).to.have.property('appointment');",
                  "    pm.expect(response.data).to.have.property('nextSteps');",
                  "});",
                  "",
                  "pm.test('Appointment status updated to Completed', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data.appointment.status).to.eql('Completed');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chiefComplaint\": \"Patient reports sneezing, runny nose, and itchy eyes for the past week. Symptoms worse in the morning.\",\n  \"presentingSymptoms\": [\"Sneezing\", \"Rhinorrhea (clear discharge)\", \"Ocular itching\", \"Nasal congestion\"],\n  \"diagnosis\": [\n    {\n      \"code\": \"J30.9\",\n      \"description\": \"Allergic rhinitis, unspecified\",\n      \"confidence\": \"High\"\n    }\n  ],\n  \"medications\": [\n    {\n      \"name\": \"Loratadine\",\n      \"dosage\": \"10mg\",\n      \"frequency\": \"Once daily\",\n      \"duration\": \"2 weeks\",\n      \"instructions\": \"Take with or without food\"\n    }\n  ],\n  \"vitalSigns\": {\n    \"bloodPressure\": \"128/82 mmHg\",\n    \"heartRate\": \"76 bpm\",\n    \"temperature\": \"98.6¬∞F\",\n    \"respiratoryRate\": \"16 breaths/min\",\n    \"oxygenSaturation\": \"98%\"\n  },\n  \"doctorRemarks\": \"Patient educated about allergen avoidance. Follow up in 2-3 weeks if symptoms persist.\",\n  \"followUpInstructions\": \"Return in 2-3 weeks if symptoms persist or worsen. Avoid known allergens.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/{{testEncounterId}}/finalize",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "{{testEncounterId}}", "finalize"]
            },
            "description": "Finalize encounter with completed form data (saves to patient record and updates appointment status)"
          },
          "response": []
        }
      ],
      "description": "Patient encounter workflow using mock data layer - complete EMR integration with AI analysis"
    },
    {
      "name": "üë®‚Äçüíº Admin Authentication",
      "item": [
        {
          "name": "Register First Admin (Bootstrap)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Admin registration successful', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.admin) {",
                  "        pm.collectionVariables.set('adminId', response.data.admin._id);",
                  "        pm.collectionVariables.set('adminEmail', response.data.admin.email);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"System Administrator\",\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"AdminPass123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/register",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "register"]
            },
            "description": "Register the first admin user (bootstrap endpoint)"
          },
          "response": []
        },
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Admin login successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.accessToken) {",
                  "        pm.collectionVariables.set('adminAccessToken', response.data.accessToken);",
                  "    }",
                  "    if (response.data && response.data.admin) {",
                  "        pm.collectionVariables.set('adminId', response.data.admin._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"AdminPass123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/login",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "login"]
            },
            "description": "Login as admin"
          },
          "response": []
        },
        {
          "name": "Get Admin Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Admin profile retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/profile",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "profile"]
            },
            "description": "Get admin profile"
          },
          "response": []
        },
        {
          "name": "Logout Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Admin logout successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/logout",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "logout"]
            },
            "description": "Logout admin"
          },
          "response": []
        }
      ],
      "description": "Admin authentication endpoints"
    },
    {
      "name": "üìä Admin Dashboard",
      "item": [
        {
          "name": "Get Dashboard Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Dashboard stats retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains statistics', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('doctors');",
                  "    pm.expect(response.data).to.have.property('admins');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/dashboard/stats",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "dashboard", "stats"]
            },
            "description": "Get dashboard statistics"
          },
          "response": []
        },
        {
          "name": "Get All Doctors",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Doctors list retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains doctors data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('doctors');",
                  "    pm.expect(response.data).to.have.property('pagination');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/doctors?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "doctors"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get all doctors with pagination"
          },
          "response": []
        },
        {
          "name": "Get Pending Doctors",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Pending doctors retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/doctors?status=pending_verification",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "doctors"],
              "query": [
                {
                  "key": "status",
                  "value": "pending_verification"
                }
              ]
            },
            "description": "Get doctors with pending verification status"
          },
          "response": []
        }
      ],
      "description": "Admin dashboard and management endpoints"
    },
    {
      "name": "üîß Admin Doctor Management",
      "item": [
        {
          "name": "Verify Doctor Account",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Doctor verification successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains verified doctor data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('doctor');",
                  "    pm.expect(response.data.doctor.accountStatus).to.eql('active');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/doctors/{{doctorId}}/verify",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "doctors", "{{doctorId}}", "verify"]
            },
            "description": "Verify a doctor's account"
          },
          "response": []
        },
        {
          "name": "Suspend Doctor Account",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Doctor suspension successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains suspended doctor data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('doctor');",
                  "    pm.expect(response.data.doctor.accountStatus).to.eql('suspended');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/doctors/{{doctorId}}/suspend",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "doctors", "{{doctorId}}", "suspend"]
            },
            "description": "Suspend a doctor's account"
          },
          "response": []
        }
      ],
      "description": "Admin doctor management functions"
    },
    {
      "name": "‚ùå Error Testing",
      "item": [
        {
          "name": "Register Doctor - Validation Error",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Validation error returned', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Response contains validation errors', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('errors');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. X\",\n  \"email\": \"invalid-email\",\n  \"medicalRegistrationId\": \"MED\",\n  \"specialty\": \"C\",\n  \"password\": \"123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Test validation errors with invalid data"
          },
          "response": []
        },
        {
          "name": "Register Doctor - Duplicate Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Duplicate email error returned', function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Duplicate User\",\n  \"email\": \"{{testEmail}}\",\n  \"medicalRegistrationId\": \"MED999999\",\n  \"specialty\": \"Cardiology\",\n  \"password\": \"TestPass456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Test duplicate email error"
          },
          "response": []
        },
        {
          "name": "Login Doctor - Invalid Credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Invalid credentials error returned', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"WrongPassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": ["{{baseUrl}}"],
              "path": ["login"]
            },
            "description": "Test login with invalid credentials"
          },
          "response": []
        },
        {
          "name": "Get Profile - No Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Unauthorized error returned', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/profile",
              "host": ["{{baseUrl}}"],
              "path": ["profile"]
            },
            "description": "Test accessing protected route without token"
          },
          "response": []
        },
        {
          "name": "Get Profile - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Invalid token error returned', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "invalid-token-12345",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/profile",
              "host": ["{{baseUrl}}"],
              "path": ["profile"]
            },
            "description": "Test accessing protected route with invalid token"
          },
          "response": []
        },
        {
          "name": "Admin Register - Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Admin already exists error returned', function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Another Admin\",\n  \"email\": \"admin2@example.com\",\n  \"password\": \"AdminPass456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/register",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "register"]
            },
            "description": "Test admin registration when admin already exists"
          },
          "response": []
        }
      ],
      "description": "Error testing scenarios"
    },
    {
      "name": "üìã Sample Data",
      "item": [
        {
          "name": "Register Cardiologist",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Sarah Johnson\",\n  \"email\": \"sarah.johnson@example.com\",\n  \"medicalRegistrationId\": \"MED789012\",\n  \"specialty\": \"Cardiology\",\n  \"password\": \"SecurePass456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Register a cardiologist doctor"
          },
          "response": []
        },
        {
          "name": "Register Neurologist",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Michael Chen\",\n  \"email\": \"michael.chen@example.com\",\n  \"medicalRegistrationId\": \"MED345678\",\n  \"specialty\": \"Neurology\",\n  \"password\": \"SecurePass789\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Register a neurologist doctor"
          },
          "response": []
        },
        {
          "name": "Register Orthopedist",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Emily Rodriguez\",\n  \"email\": \"emily.rodriguez@example.com\",\n  \"medicalRegistrationId\": \"MED901234\",\n  \"specialty\": \"Orthopedics\",\n  \"password\": \"SecurePass012\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Register an orthopedist doctor"
          },
          "response": []
        },
        {
          "name": "Register Pediatrician",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. James Wilson\",\n  \"email\": \"james.wilson@example.com\",\n  \"medicalRegistrationId\": \"MED567890\",\n  \"specialty\": \"Pediatrics\",\n  \"password\": \"SecurePass345\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Register a pediatrician doctor"
          },
          "response": []
        }
      ],
      "description": "Sample data for testing with different doctor specialties"
    },
    {
      "name": "üîÑ Complete Flow Test",
      "item": [
        {
          "name": "1. Register Test Doctor",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Flow Test\",\n  \"email\": \"flow.test@example.com\",\n  \"medicalRegistrationId\": \"MED{{$timestamp}}\",\n  \"specialty\": \"Emergency Medicine\",\n  \"password\": \"FlowTest123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["register"]
            },
            "description": "Step 1: Register a doctor for flow testing"
          },
          "response": []
        },
        {
          "name": "2. Login as Doctor",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"flow.test@example.com\",\n  \"password\": \"FlowTest123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": ["{{baseUrl}}"],
              "path": ["login"]
            },
            "description": "Step 2: Login as the registered doctor"
          },
          "response": []
        },
        {
          "name": "3. Login as Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"AdminPass123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/login",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "login"]
            },
            "description": "Step 3: Login as admin"
          },
          "response": []
        },
        {
          "name": "4. Verify Doctor Account",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminAccessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/doctors/{{doctorId}}/verify",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "doctors", "{{doctorId}}", "verify"]
            },
            "description": "Step 4: Admin verifies the doctor account"
          },
          "response": []
        },
        {
          "name": "5. Doctor Login After Verification",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"flow.test@example.com\",\n  \"password\": \"FlowTest123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": ["{{baseUrl}}"],
              "path": ["login"]
            },
            "description": "Step 5: Doctor can now login successfully after verification"
          },
          "response": []
        },
        {
          "name": "6. Doctor Workbench - Appointments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/appointments?date={{workbenchDate}}",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"],
              "query": [
                {
                  "key": "date",
                  "value": "{{workbenchDate}}"
                }
              ]
            },
            "description": "Step 6: Fetch appointments for the day"
          },
          "response": []
        },
        {
          "name": "7. Doctor Workbench - Summary",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/workbench/summary",
              "host": ["{{baseUrl}}"],
              "path": ["workbench", "summary"]
            },
            "description": "Step 7: Fetch action items summary"
          },
          "response": []
        },
        {
          "name": "8. Doctor Workbench - Performance Snapshot",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/practitioners/me/stats?date={{workbenchDate}}",
              "host": ["{{baseUrl}}"],
              "path": ["practitioners", "me", "stats"],
              "query": [
                {
                  "key": "date",
                  "value": "{{workbenchDate}}"
                }
              ]
            },
            "description": "Step 8: Fetch performance snapshot"
          },
          "response": []
        }
      ],
      "description": "Complete flow testing from registration to verification and new workbench widgets"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set timestamp for requests",
          "pm.globals.set('timestamp', new Date().toISOString());",
          "",
          "// Log request details",
          "console.log('Making request to:', pm.request.url.toString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has success/status field when 2xx', function () {",
          "    if (pm.response.code < 400) {",
          "        const response = pm.response.json();",
          "        pm.expect(response).to.have.any.keys('success', 'status');",
          "    }",
          "});",
          "",
          "// Log response details",
          "console.log('Response status:', pm.response.status);",
          "console.log('Response time:', pm.response.responseTime + 'ms');"
        ]
      }
    }
  ]
}